<!-- index.html --> 
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>CoAP Web GUI</title>
  <style>
    body { font-family: sans-serif; max-width: 600px; margin: 20px auto; }
    button { margin: 5px; padding: 6px 12px; }
    textarea { width: 100%; height: 120px; margin-top: 10px; }
  </style>
</head>
<body>
  <h1>CoAP Web GUI</h1>
  <button onclick="getSensors()">Get Sensor Data</button>
  


  <h3>Sensor Values:</h3>
  <ul>
    <li>Temperature: <span id="temp">-</span> Â°C</li>
    <li>Humidity: <span id="hum">-</span> %</li>
    <li>Pressure: <span id="pres">-</span> hPa</li>
    <li>Gas (CO): <span id="gas">-</span></li>
    <li>Sound: <span id="sound">-</span></li>
    <li>Vibration: <span id="vibration">-</span></li>
  </ul>

  <h3>Raw JSON:</h3>
  <textarea id="output"></textarea>

<script>
  async function getSensors() {
    const r = await fetch('/sensors');

    if (!r.ok) {
      document.getElementById('output').value = 'No data yet';
      return;
    }

    const data = await r.json();
    updateSensors(data);
    document.getElementById('output').value =
      JSON.stringify(data, null, 2);
  }

  function updateSensors(data) {
    document.getElementById('temp').textContent = data.temperature ?? '-';
    document.getElementById('hum').textContent = data.humidity ?? '-';
    document.getElementById('pres').textContent = data.pressure ?? '-';
    document.getElementById('gas').textContent = data.gas ?? '-';
    document.getElementById('sound').textContent =
      data.sound ? "YES" : "NO";
    document.getElementById('vibration').textContent =
      data.vibration ? "YES" : "NO";
  }

  // Auto-refresh every 5s
  setInterval(getSensors, 5000);
</script>

</body>
</html>
